"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/test-schema-pipeline";
exports.ids = ["pages/api/test-schema-pipeline"];
exports.modules = {

/***/ "(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Ftest-schema-pipeline&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Ftest-schema-pipeline.ts&middlewareConfigBase64=e30%3D!":
/*!**********************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Ftest-schema-pipeline&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Ftest-schema-pipeline.ts&middlewareConfigBase64=e30%3D! ***!
  \**********************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/pages-api/module.compiled */ \"(api-node)/./node_modules/next/dist/server/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(api-node)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api-node)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_test_schema_pipeline_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages/api/test-schema-pipeline.ts */ \"(api-node)/./pages/api/test-schema-pipeline.ts\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_test_schema_pipeline_ts__WEBPACK_IMPORTED_MODULE_3__, 'default'));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_test_schema_pipeline_ts__WEBPACK_IMPORTED_MODULE_3__, 'config');\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/test-schema-pipeline\",\n        pathname: \"/api/test-schema-pipeline\",\n        // The following aren't used in production.\n        bundlePath: '',\n        filename: ''\n    },\n    userland: _pages_api_test_schema_pipeline_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvYnVpbGQvd2VicGFjay9sb2FkZXJzL25leHQtcm91dGUtbG9hZGVyL2luZGV4LmpzP2tpbmQ9UEFHRVNfQVBJJnBhZ2U9JTJGYXBpJTJGdGVzdC1zY2hlbWEtcGlwZWxpbmUmcHJlZmVycmVkUmVnaW9uPSZhYnNvbHV0ZVBhZ2VQYXRoPS4lMkZwYWdlcyUyRmFwaSUyRnRlc3Qtc2NoZW1hLXBpcGVsaW5lLnRzJm1pZGRsZXdhcmVDb25maWdCYXNlNjQ9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUErRjtBQUN2QztBQUNFO0FBQzFEO0FBQ2dFO0FBQ2hFO0FBQ0EsaUVBQWUsd0VBQUssQ0FBQywrREFBUSxZQUFZLEVBQUM7QUFDMUM7QUFDTyxlQUFlLHdFQUFLLENBQUMsK0RBQVE7QUFDcEM7QUFDTyx3QkFBd0IseUdBQW1CO0FBQ2xEO0FBQ0EsY0FBYyxrRUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLFlBQVk7QUFDWixDQUFDOztBQUVEIiwic291cmNlcyI6WyIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGFnZXNBUElSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLW1vZHVsZXMvcGFnZXMtYXBpL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgaG9pc3QgfSBmcm9tIFwibmV4dC9kaXN0L2J1aWxkL3RlbXBsYXRlcy9oZWxwZXJzXCI7XG4vLyBJbXBvcnQgdGhlIHVzZXJsYW5kIGNvZGUuXG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiLi9wYWdlcy9hcGkvdGVzdC1zY2hlbWEtcGlwZWxpbmUudHNcIjtcbi8vIFJlLWV4cG9ydCB0aGUgaGFuZGxlciAoc2hvdWxkIGJlIHRoZSBkZWZhdWx0IGV4cG9ydCkuXG5leHBvcnQgZGVmYXVsdCBob2lzdCh1c2VybGFuZCwgJ2RlZmF1bHQnKTtcbi8vIFJlLWV4cG9ydCBjb25maWcuXG5leHBvcnQgY29uc3QgY29uZmlnID0gaG9pc3QodXNlcmxhbmQsICdjb25maWcnKTtcbi8vIENyZWF0ZSBhbmQgZXhwb3J0IHRoZSByb3V0ZSBtb2R1bGUgdGhhdCB3aWxsIGJlIGNvbnN1bWVkLlxuZXhwb3J0IGNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IFBhZ2VzQVBJUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLlBBR0VTX0FQSSxcbiAgICAgICAgcGFnZTogXCIvYXBpL3Rlc3Qtc2NoZW1hLXBpcGVsaW5lXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvdGVzdC1zY2hlbWEtcGlwZWxpbmVcIixcbiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBhcmVuJ3QgdXNlZCBpbiBwcm9kdWN0aW9uLlxuICAgICAgICBidW5kbGVQYXRoOiAnJyxcbiAgICAgICAgZmlsZW5hbWU6ICcnXG4gICAgfSxcbiAgICB1c2VybGFuZFxufSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhZ2VzLWFwaS5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Ftest-schema-pipeline&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Ftest-schema-pipeline.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api-node)/./pages/api/test-schema-pipeline.ts":
/*!*******************************************!*\
  !*** ./pages/api/test-schema-pipeline.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"@supabase/supabase-js\");\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var fs_promises__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! fs/promises */ \"fs/promises\");\n/* harmony import */ var fs_promises__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(fs_promises__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_2__);\n\n\n\nconst supabase = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(process.env.SUPABASE_URL, process.env.SUPABASE_SERVICE_ROLE_KEY);\nasync function handler(req, res) {\n    try {\n        const results = {\n            step1_fetch_schema: null,\n            step2_generated_clients: [],\n            step3_test_clients: [],\n            errors: []\n        };\n        // Step 1: Test fetching schema\n        try {\n            console.log('Testing schema fetch...');\n            const { data: tables, error } = await supabase.rpc('get_all_tables');\n            if (error) throw error;\n            results.step1_fetch_schema = {\n                success: true,\n                tables_found: tables?.length || 0,\n                tables: tables || []\n            };\n            // Test getting columns for first table\n            if (tables && tables.length > 0) {\n                const { data: columns, error: colError } = await supabase.rpc('get_table_columns', {\n                    table_name_input: tables[0]\n                });\n                results.step1_fetch_schema.sample_columns = {\n                    table: tables[0],\n                    columns: columns || [],\n                    error: colError?.message\n                };\n            }\n        } catch (error) {\n            results.errors.push(`Schema fetch failed: ${error.message}`);\n            results.step1_fetch_schema = {\n                success: false,\n                error: error.message\n            };\n        }\n        // Step 2: Test existing generated clients\n        try {\n            console.log('Testing generated clients...');\n            const clientsDir = path__WEBPACK_IMPORTED_MODULE_2___default().resolve(process.cwd(), 'lib/supabase/_generated/clients');\n            try {\n                const files = await fs_promises__WEBPACK_IMPORTED_MODULE_1___default().readdir(clientsDir);\n                const tsFiles = files.filter((f)=>f.endsWith('.ts'));\n                for (const file of tsFiles.slice(0, 3)){\n                    try {\n                        const tableName = file.replace('.ts', '');\n                        const clientModule = await Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'undefined'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\n                        // Test if client can be created\n                        const client = clientModule[`${tableName}Client`]?.();\n                        if (client) {\n                            results.step2_generated_clients.push({\n                                table: tableName,\n                                status: 'success',\n                                has_client: true\n                            });\n                        } else {\n                            results.step2_generated_clients.push({\n                                table: tableName,\n                                status: 'warning',\n                                has_client: false,\n                                message: 'Client function not found'\n                            });\n                        }\n                    } catch (importError) {\n                        results.step2_generated_clients.push({\n                            table: file,\n                            status: 'error',\n                            error: importError.message\n                        });\n                    }\n                }\n            } catch (dirError) {\n                results.errors.push(`Clients directory not found: ${dirError.message}`);\n            }\n        } catch (error) {\n            results.errors.push(`Generated clients test failed: ${error.message}`);\n        }\n        // Step 3: Test actual database operations with working clients\n        try {\n            console.log('Testing database operations...');\n            // Test with a direct client approach\n            const testTables = [\n                'users',\n                'announcements'\n            ]; // Common tables\n            for (const tableName of testTables){\n                try {\n                    const { data, error } = await supabase.from(tableName).select('*').limit(1);\n                    results.step3_test_clients.push({\n                        table: tableName,\n                        status: error ? 'error' : 'success',\n                        data_count: data?.length || 0,\n                        error: error?.message\n                    });\n                } catch (tableError) {\n                    results.step3_test_clients.push({\n                        table: tableName,\n                        status: 'error',\n                        error: tableError.message\n                    });\n                }\n            }\n        } catch (error) {\n            results.errors.push(`Database operations test failed: ${error.message}`);\n        }\n        return res.status(200).json({\n            message: 'Schema pipeline test completed',\n            timestamp: new Date().toISOString(),\n            results,\n            summary: {\n                schema_fetch_working: results.step1_fetch_schema?.success || false,\n                generated_clients_count: results.step2_generated_clients.length,\n                database_operations_working: results.step3_test_clients.filter((t)=>t.status === 'success').length,\n                total_errors: results.errors.length\n            }\n        });\n    } catch (error) {\n        console.error('Pipeline test error:', error);\n        const errorMessage = error instanceof Error ? error.message : 'Unknown error occurred';\n        return res.status(500).json({\n            error: errorMessage\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL3BhZ2VzL2FwaS90ZXN0LXNjaGVtYS1waXBlbGluZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQ3FEO0FBQ3hCO0FBQ0w7QUFFeEIsTUFBTUcsV0FBV0gsbUVBQVlBLENBQzNCSSxRQUFRQyxHQUFHLENBQUNDLFlBQVksRUFDeEJGLFFBQVFDLEdBQUcsQ0FBQ0UseUJBQXlCO0FBR3hCLGVBQWVDLFFBQVFDLEdBQW1CLEVBQUVDLEdBQW9CO0lBQzdFLElBQUk7UUFDRixNQUFNQyxVQUFlO1lBQ25CQyxvQkFBb0I7WUFDcEJDLHlCQUF5QixFQUFFO1lBQzNCQyxvQkFBb0IsRUFBRTtZQUN0QkMsUUFBUSxFQUFFO1FBQ1o7UUFFQSwrQkFBK0I7UUFDL0IsSUFBSTtZQUNGQyxRQUFRQyxHQUFHLENBQUM7WUFDWixNQUFNLEVBQUVDLE1BQU1DLE1BQU0sRUFBRUMsS0FBSyxFQUFFLEdBQUcsTUFBTWpCLFNBQVNrQixHQUFHLENBQUM7WUFFbkQsSUFBSUQsT0FBTyxNQUFNQTtZQUVqQlQsUUFBUUMsa0JBQWtCLEdBQUc7Z0JBQzNCVSxTQUFTO2dCQUNUQyxjQUFjSixRQUFRSyxVQUFVO2dCQUNoQ0wsUUFBUUEsVUFBVSxFQUFFO1lBQ3RCO1lBRUEsdUNBQXVDO1lBQ3ZDLElBQUlBLFVBQVVBLE9BQU9LLE1BQU0sR0FBRyxHQUFHO2dCQUMvQixNQUFNLEVBQUVOLE1BQU1PLE9BQU8sRUFBRUwsT0FBT00sUUFBUSxFQUFFLEdBQUcsTUFBTXZCLFNBQVNrQixHQUFHLENBQUMscUJBQXFCO29CQUNqRk0sa0JBQWtCUixNQUFNLENBQUMsRUFBRTtnQkFDN0I7Z0JBRUFSLFFBQVFDLGtCQUFrQixDQUFDZ0IsY0FBYyxHQUFHO29CQUMxQ0MsT0FBT1YsTUFBTSxDQUFDLEVBQUU7b0JBQ2hCTSxTQUFTQSxXQUFXLEVBQUU7b0JBQ3RCTCxPQUFPTSxVQUFVSTtnQkFDbkI7WUFDRjtRQUNGLEVBQUUsT0FBT1YsT0FBWTtZQUNuQlQsUUFBUUksTUFBTSxD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LFFBQVFDLGtCQUFrQixFQUFFVSxXQUFXO2dCQUM3RHlDLHlCQUF5QnBELFFBQVFFLHVCQUF1QixDQUFDVyxNQUFNO2dCQUMvRHdDLDZCQUE2QnJELFFBQVFHLGtCQUFrQixDQUFDd0IsTUFBTSxDQUFDMkIsQ0FBQUEsSUFBS0EsRUFBRWxCLE1BQU0sS0FBSyxXQUFXdkIsTUFBTTtnQkFDbEcwQyxjQUFjdkQsUUFBUUksTUFBTSxDQUFDUyxNQUFNO1lBQ3JDO1FBQ0Y7SUFFRixFQUFFLE9BQU9KLE9BQWdCO1FBQ3ZCSixRQUFRSSxLQUFLLENBQUMsd0JBQXdCQTtRQUN0QyxNQUFNK0MsZUFBZS9DLGlCQUFpQmdELFFBQVFoRCxNQUFNVSxPQUFPLEdBQUc7UUFDOUQsT0FBT3BCLElBQUlxQyxNQUFNLENBQUMsS0FBS1UsSUFBSSxDQUFDO1lBQUVyQyxPQUFPK0M7UUFBYTtJQUNwRDtBQUNGIiwic291cmNlcyI6WyIvVXNlcnMvcmFqYXRkaGFuZGEvc2FuZGJveC9zYW5kYm94LWFwcC9zYW5kYm94LWFwcC0xL3BhZ2VzL2FwaS90ZXN0LXNjaGVtYS1waXBlbGluZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7IE5leHRBcGlSZXF1ZXN0LCBOZXh0QXBpUmVzcG9uc2UgfSBmcm9tICduZXh0JztcbmltcG9ydCB7IGNyZWF0ZUNsaWVudCB9IGZyb20gJ0BzdXBhYmFzZS9zdXBhYmFzZS1qcyc7XG5pbXBvcnQgZnMgZnJvbSAnZnMvcHJvbWlzZXMnO1xuaW1wb3J0IHBhdGggZnJvbSAncGF0aCc7XG5cbmNvbnN0IHN1cGFiYXNlID0gY3JlYXRlQ2xpZW50KFxuICBwcm9jZXNzLmVudi5TVVBBQkFTRV9VUkwhLFxuICBwcm9jZXNzLmVudi5TVVBBQkFTRV9TRVJWSUNFX1JPTEVfS0VZIVxuKTtcblxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlcihyZXE6IE5leHRBcGlSZXF1ZXN0LCByZXM6IE5leHRBcGlSZXNwb25zZSkge1xuICB0cnkge1xuICAgIGNvbnN0IHJlc3VsdHM6IGFueSA9IHtcbiAgICAgIHN0ZXAxX2ZldGNoX3NjaGVtYTogbnVsbCxcbiAgICAgIHN0ZXAyX2dlbmVyYXRlZF9jbGllbnRzOiBbXSxcbiAgICAgIHN0ZXAzX3Rlc3RfY2xpZW50czogW10sXG4gICAgICBlcnJvcnM6IFtdXG4gICAgfTtcblxuICAgIC8vIFN0ZXAgMTogVGVzdCBmZXRjaGluZyBzY2hlbWFcbiAgICB0cnkge1xuICAgICAgY29uc29sZS5sb2coJ1Rlc3Rpbmcgc2NoZW1hIGZldGNoLi4uJyk7XG4gICAgICBjb25zdCB7IGRhdGE6IHRhYmxlcywgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlLnJwYygnZ2V0X2FsbF90YWJsZXMnKTtcbiAgICAgIFxuICAgICAgaWYgKGVycm9yKSB0aHJvdyBlcnJvcjtcbiAgICAgIFxuICAgICAgcmVzdWx0cy5zdGVwMV9mZXRjaF9zY2hlbWEgPSB7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIHRhYmxlc19mb3VuZDogdGFibGVzPy5sZW5ndGggfHwgMCxcbiAgICAgICAgdGFibGVzOiB0YWJsZXMgfHwgW11cbiAgICAgIH07XG4gICAgICBcbiAgICAgIC8vIFRlc3QgZ2V0dGluZyBjb2x1bW5zIGZvciBmaXJzdCB0YWJsZVxuICAgICAgaWYgKHRhYmxlcyAmJiB0YWJsZXMubGVuZ3RoID4gMCkge1xuICAgICAgICBjb25zdCB7IGRhdGE6IGNvbHVtbnMsIGVycm9yOiBjb2xFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2UucnBjKCdnZXRfdGFibGVfY29sdW1ucycsIHtcbiAgICAgICAgICB0YWJsZV9uYW1lX2lucHV0OiB0YWJsZXNbMF1cbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICByZXN1bHRzLnN0ZXAxX2ZldGNoX3NjaGVtYS5zYW1wbGVfY29sdW1ucyA9IHtcbiAgICAgICAgICB0YWJsZTogdGFibGVzWzBdLFxuICAgICAgICAgIGNvbHVtbnM6IGNvbHVtbnMgfHwgW10sXG4gICAgICAgICAgZXJyb3I6IGNvbEVycm9yPy5tZXNzYWdlXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgICAgcmVzdWx0cy5lcnJvcnMucHVzaChgU2NoZW1hIGZldGNoIGZhaWxlZDogJHtlcnJvci5tZXNzYWdlfWApO1xuICAgICAgcmVzdWx0cy5zdGVwMV9mZXRjaF9zY2hlbWEgPSB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9O1xuICAgIH1cblxuICAgIC8vIFN0ZXAgMjogVGVzdCBleGlzdGluZyBnZW5lcmF0ZWQgY2xpZW50c1xuICAgIHRyeSB7XG4gICAgICBjb25zb2xlLmxvZygnVGVzdGluZyBnZW5lcmF0ZWQgY2xpZW50cy4uLicpO1xuICAgICAgY29uc3QgY2xpZW50c0RpciA9IHBhdGgucmVzb2x2ZShwcm9jZXNzLmN3ZCgpLCAnbGliL3N1cGFiYXNlL19nZW5lcmF0ZWQvY2xpZW50cycpO1xuICAgICAgXG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBmaWxlcyA9IGF3YWl0IGZzLnJlYWRkaXIoY2xpZW50c0Rpcik7XG4gICAgICAgIGNvbnN0IHRzRmlsZXMgPSBmaWxlcy5maWx0ZXIoZiA9PiBmLmVuZHNXaXRoKCcudHMnKSk7XG4gICAgICAgIFxuICAgICAgICBmb3IgKGNvbnN0IGZpbGUgb2YgdHNGaWxlcy5zbGljZSgwLCAzKSkgeyAvLyBUZXN0IGZpcnN0IDMgY2xpZW50c1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCB0YWJsZU5hbWUgPSBmaWxlLnJlcGxhY2UoJy50cycsICcnKTtcbiAgICAgICAgICAgIGNvbnN0IGNsaWVudE1vZHVsZSA9IGF3YWl0IGltcG9ydChgLi4vLi4vLi4vbGliL3N1cGFiYXNlL19nZW5lcmF0ZWQvY2xpZW50cy8ke3RhYmxlTmFtZX1gKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gVGVzdCBpZiBjbGllbnQgY2FuIGJlIGNyZWF0ZWRcbiAgICAgICAgICAgIGNvbnN0IGNsaWVudCA9IGNsaWVudE1vZHVsZVtgJHt0YWJsZU5hbWV9Q2xpZW50YF0/LigpO1xuICAgICAgICAgICAgaWYgKGNsaWVudCkge1xuICAgICAgICAgICAgICByZXN1bHRzLnN0ZXAyX2dlbmVyYXRlZF9jbGllbnRzLnB1c2goe1xuICAgICAgICAgICAgICAgIHRhYmxlOiB0YWJsZU5hbWUsXG4gICAgICAgICAgICAgICAgc3RhdHVzOiAnc3VjY2VzcycsXG4gICAgICAgICAgICAgICAgaGFzX2NsaWVudDogdHJ1ZVxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHJlc3VsdHMuc3RlcDJfZ2VuZXJhdGVkX2NsaWVudHMucHVzaCh7XG4gICAgICAgICAgICAgICAgdGFibGU6IHRhYmxlTmFtZSxcbiAgICAgICAgICAgICAgICBzdGF0dXM6ICd3YXJuaW5nJyxcbiAgICAgICAgICAgICAgICBoYXNfY2xpZW50OiBmYWxzZSxcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiAnQ2xpZW50IGZ1bmN0aW9uIG5vdCBmb3VuZCdcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBjYXRjaCAoaW1wb3J0RXJyb3I6IGFueSkge1xuICAgICAgICAgICAgcmVzdWx0cy5zdGVwMl9nZW5lcmF0ZWRfY2xpZW50cy5wdXNoKHtcbiAgICAgICAgICAgICAgdGFibGU6IGZpbGUsXG4gICAgICAgICAgICAgIHN0YXR1czogJ2Vycm9yJyxcbiAgICAgICAgICAgICAgZXJyb3I6IGltcG9ydEVycm9yLm1lc3NhZ2VcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZGlyRXJyb3I6IGFueSkge1xuICAgICAgICByZXN1bHRzLmVycm9ycy5wdXNoKGBDbGllbnRzIGRpcmVjdG9yeSBub3QgZm91bmQ6ICR7ZGlyRXJyb3IubWVzc2FnZX1gKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgICByZXN1bHRzLmVycm9ycy5wdXNoKGBHZW5lcmF0ZWQgY2xpZW50cyB0ZXN0IGZhaWxlZDogJHtlcnJvci5tZXNzYWdlfWApO1xuICAgIH1cblxuICAgIC8vIFN0ZXAgMzogVGVzdCBhY3R1YWwgZGF0YWJhc2Ugb3BlcmF0aW9ucyB3aXRoIHdvcmtpbmcgY2xpZW50c1xuICAgIHRyeSB7XG4gICAgICBjb25zb2xlLmxvZygnVGVzdGluZyBkYXRhYmFzZSBvcGVyYXRpb25zLi4uJyk7XG4gICAgICBcbiAgICAgIC8vIFRlc3Qgd2l0aCBhIGRpcmVjdCBjbGllbnQgYXBwcm9hY2hcbiAgICAgIGNvbnN0IHRlc3RUYWJsZXMgPSBbJ3VzZXJzJywgJ2Fubm91bmNlbWVudHMnXTsgLy8gQ29tbW9uIHRhYmxlc1xuICAgICAgXG4gICAgICBmb3IgKGNvbnN0IHRhYmxlTmFtZSBvZiB0ZXN0VGFibGVzKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgICAgICAgIC5mcm9tKHRhYmxlTmFtZSlcbiAgICAgICAgICAgIC5zZWxlY3QoJyonKVxuICAgICAgICAgICAgLmxpbWl0KDEpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgcmVzdWx0cy5zdGVwM190ZXN0X2NsaWVudHMucHVzaCh7XG4gICAgICAgICAgICB0YWJsZTogdGFibGVOYW1lLFxuICAgICAgICAgICAgc3RhdHVzOiBlcnJvciA/ICdlcnJvcicgOiAnc3VjY2VzcycsXG4gICAgICAgICAgICBkYXRhX2NvdW50OiBkYXRhPy5sZW5ndGggfHwgMCxcbiAgICAgICAgICAgIGVycm9yOiBlcnJvcj8ubWVzc2FnZVxuICAgICAgICAgIH0pO1xuICAgICAgICB9IGNhdGNoICh0YWJsZUVycm9yOiBhbnkpIHtcbiAgICAgICAgICByZXN1bHRzLnN0ZXAzX3Rlc3RfY2xpZW50cy5wdXNoKHtcbiAgICAgICAgICAgIHRhYmxlOiB0YWJsZU5hbWUsXG4gICAgICAgICAgICBzdGF0dXM6ICdlcnJvcicsXG4gICAgICAgICAgICBlcnJvcjogdGFibGVFcnJvci5tZXNzYWdlXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgICByZXN1bHRzLmVycm9ycy5wdXNoKGBEYXRhYmFzZSBvcGVyYXRpb25zIHRlc3QgZmFpbGVkOiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcbiAgICAgIG1lc3NhZ2U6ICdTY2hlbWEgcGlwZWxpbmUgdGVzdCBjb21wbGV0ZWQnLFxuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICByZXN1bHRzLFxuICAgICAgc3VtbWFyeToge1xuICAgICAgICBzY2hlbWFfZmV0Y2hfd29ya2luZzogcmVzdWx0cy5zdGVwMV9mZXRjaF9zY2hlbWE/LnN1Y2Nlc3MgfHwgZmFsc2UsXG4gICAgICAgIGdlbmVyYXRlZF9jbGllbnRzX2NvdW50OiByZXN1bHRzLnN0ZXAyX2dlbmVyYXRlZF9jbGllbnRzLmxlbmd0aCxcbiAgICAgICAgZGF0YWJhc2Vfb3BlcmF0aW9uc193b3JraW5nOiByZXN1bHRzLnN0ZXAzX3Rlc3RfY2xpZW50cy5maWx0ZXIodCA9PiB0LnN0YXR1cyA9PT0gJ3N1Y2Nlc3MnKS5sZW5ndGgsXG4gICAgICAgIHRvdGFsX2Vycm9yczogcmVzdWx0cy5lcnJvcnMubGVuZ3RoXG4gICAgICB9XG4gICAgfSk7XG5cbiAgfSBjYXRjaCAoZXJyb3I6IHVua25vd24pIHtcbiAgICBjb25zb2xlLmVycm9yKCdQaXBlbGluZSB0ZXN0IGVycm9yOicsIGVycm9yKTtcbiAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yIG9jY3VycmVkJztcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogZXJyb3JNZXNzYWdlIH0pO1xuICB9XG59Il0sIm5hbWVzIjpbImNyZWF0ZUNsaWVudCIsImZzIiwicGF0aCIsInN1cGFiYXNlIiwicHJvY2VzcyIsImVudiIsIlNVUEFCQVNFX1VSTCIsIlNVUEFCQVNFX1NFUlZJQ0VfUk9MRV9LRVkiLCJoYW5kbGVyIiwicmVxIiwicmVzIiwicmVzdWx0cyIsInN0ZXAxX2ZldGNoX3NjaGVtYSIsInN0ZXAyX2dlbmVyYXRlZF9jbGllbnRzIiwic3RlcDNfdGVzdF9jbGllbnRzIiwiZXJyb3JzIiwiY29uc29sZSIsImxvZyIsImRhdGEiLCJ0YWJsZXMiLCJlcnJvciIsInJwYyIsInN1Y2Nlc3MiLCJ0YWJsZXNfZm91bmQiLCJsZW5ndGgiLCJjb2x1bW5zIiwiY29sRXJyb3IiLCJ0YWJsZV9uYW1lX2lucHV0Iiwic2FtcGxlX2NvbHVtbnMiLCJ0YWJsZSIsIm1lc3NhZ2UiLCJwdXNoIiwiY2xpZW50c0RpciIsInJlc29sdmUiLCJjd2QiLCJmaWxlcyIsInJlYWRkaXIiLCJ0c0ZpbGVzIiwiZmlsdGVyIiwiZiIsImVuZHNXaXRoIiwiZmlsZSIsInNsaWNlIiwidGFibGVOYW1lIiwicmVwbGFjZSIsImNsaWVudE1vZHVsZSIsImNsaWVudCIsInN0YXR1cyIsImhhc19jbGllbnQiLCJpbXBvcnRFcnJvciIsImRpckVycm9yIiwidGVzdFRhYmxlcyIsImZyb20iLCJzZWxlY3QiLCJsaW1pdCIsImRhdGFfY291bnQiLCJ0YWJsZUVycm9yIiwianNvbiIsInRpbWVzdGFtcCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsInN1bW1hcnkiLCJzY2hlbWFfZmV0Y2hfd29ya2luZyIsImdlbmVyYXRlZF9jbGllbnRzX2NvdW50IiwiZGF0YWJhc2Vfb3BlcmF0aW9uc193b3JraW5nIiwidCIsInRvdGFsX2Vycm9ycyIsImVycm9yTWVzc2FnZSIsIkVycm9yIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api-node)/./pages/api/test-schema-pipeline.ts\n");

/***/ }),

/***/ "@supabase/supabase-js":
/*!****************************************!*\
  !*** external "@supabase/supabase-js" ***!
  \****************************************/
/***/ ((module) => {

module.exports = require("@supabase/supabase-js");

/***/ }),

/***/ "fs/promises":
/*!******************************!*\
  !*** external "fs/promises" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("fs/promises");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Ftest-schema-pipeline&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Ftest-schema-pipeline.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();