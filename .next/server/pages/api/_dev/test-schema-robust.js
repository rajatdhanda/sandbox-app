"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/_dev/test-schema-robust";
exports.ids = ["pages/api/_dev/test-schema-robust"];
exports.modules = {

/***/ "(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2F_dev%2Ftest-schema-robust&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2F_dev%2Ftest-schema-robust.ts&middlewareConfigBase64=e30%3D!":
/*!********************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2F_dev%2Ftest-schema-robust&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2F_dev%2Ftest-schema-robust.ts&middlewareConfigBase64=e30%3D! ***!
  \********************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/pages-api/module.compiled */ \"(api-node)/./node_modules/next/dist/server/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(api-node)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api-node)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_dev_test_schema_robust_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages/api/_dev/test-schema-robust.ts */ \"(api-node)/./pages/api/_dev/test-schema-robust.ts\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_dev_test_schema_robust_ts__WEBPACK_IMPORTED_MODULE_3__, 'default'));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_dev_test_schema_robust_ts__WEBPACK_IMPORTED_MODULE_3__, 'config');\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/_dev/test-schema-robust\",\n        pathname: \"/api/_dev/test-schema-robust\",\n        // The following aren't used in production.\n        bundlePath: '',\n        filename: ''\n    },\n    userland: _pages_api_dev_test_schema_robust_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvYnVpbGQvd2VicGFjay9sb2FkZXJzL25leHQtcm91dGUtbG9hZGVyL2luZGV4LmpzP2tpbmQ9UEFHRVNfQVBJJnBhZ2U9JTJGYXBpJTJGX2RldiUyRnRlc3Qtc2NoZW1hLXJvYnVzdCZwcmVmZXJyZWRSZWdpb249JmFic29sdXRlUGFnZVBhdGg9LiUyRnBhZ2VzJTJGYXBpJTJGX2RldiUyRnRlc3Qtc2NoZW1hLXJvYnVzdC50cyZtaWRkbGV3YXJlQ29uZmlnQmFzZTY0PWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBK0Y7QUFDdkM7QUFDRTtBQUMxRDtBQUNtRTtBQUNuRTtBQUNBLGlFQUFlLHdFQUFLLENBQUMsaUVBQVEsWUFBWSxFQUFDO0FBQzFDO0FBQ08sZUFBZSx3RUFBSyxDQUFDLGlFQUFRO0FBQ3BDO0FBQ08sd0JBQXdCLHlHQUFtQjtBQUNsRDtBQUNBLGNBQWMsa0VBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxZQUFZO0FBQ1osQ0FBQzs7QUFFRCIsInNvdXJjZXMiOlsiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBhZ2VzQVBJUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1tb2R1bGVzL3BhZ2VzLWFwaS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IGhvaXN0IH0gZnJvbSBcIm5leHQvZGlzdC9idWlsZC90ZW1wbGF0ZXMvaGVscGVyc1wiO1xuLy8gSW1wb3J0IHRoZSB1c2VybGFuZCBjb2RlLlxuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi4vcGFnZXMvYXBpL19kZXYvdGVzdC1zY2hlbWEtcm9idXN0LnRzXCI7XG4vLyBSZS1leHBvcnQgdGhlIGhhbmRsZXIgKHNob3VsZCBiZSB0aGUgZGVmYXVsdCBleHBvcnQpLlxuZXhwb3J0IGRlZmF1bHQgaG9pc3QodXNlcmxhbmQsICdkZWZhdWx0Jyk7XG4vLyBSZS1leHBvcnQgY29uZmlnLlxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IGhvaXN0KHVzZXJsYW5kLCAnY29uZmlnJyk7XG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgcm91dGUgbW9kdWxlIHRoYXQgd2lsbCBiZSBjb25zdW1lZC5cbmV4cG9ydCBjb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBQYWdlc0FQSVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5QQUdFU19BUEksXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9fZGV2L3Rlc3Qtc2NoZW1hLXJvYnVzdFwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL19kZXYvdGVzdC1zY2hlbWEtcm9idXN0XCIsXG4gICAgICAgIC8vIFRoZSBmb2xsb3dpbmcgYXJlbid0IHVzZWQgaW4gcHJvZHVjdGlvbi5cbiAgICAgICAgYnVuZGxlUGF0aDogJycsXG4gICAgICAgIGZpbGVuYW1lOiAnJ1xuICAgIH0sXG4gICAgdXNlcmxhbmRcbn0pO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYWdlcy1hcGkuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2F_dev%2Ftest-schema-robust&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2F_dev%2Ftest-schema-robust.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api-node)/./pages/api/_dev/test-schema-robust.ts":
/*!**********************************************!*\
  !*** ./pages/api/_dev/test-schema-robust.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"@supabase/supabase-js\");\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__);\n\nconst supabase = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(process.env.SUPABASE_URL, process.env.SUPABASE_SERVICE_ROLE_KEY);\nasync function handler(req, res) {\n    try {\n        const results = {\n            pipeline_status: 'success',\n            steps: {\n                schema_fetch: null,\n                client_generation: null,\n                end_to_end_test: null\n            },\n            recommendations: []\n        };\n        // Step 1: Test Schema Fetching\n        console.log('🔍 Testing schema fetch capabilities...');\n        try {\n            const { data: tables, error } = await supabase.rpc('get_all_tables');\n            if (error) throw error;\n            results.steps.schema_fetch = {\n                status: 'success',\n                tables_count: tables?.length || 0,\n                sample_tables: tables?.slice(0, 5) || [],\n                message: `Found ${tables?.length || 0} tables in database`\n            };\n            // Test column fetching for a few tables\n            if (tables && tables.length > 0) {\n                const sampleTable = tables[0];\n                const { data: columns, error: colError } = await supabase.rpc('get_table_columns', {\n                    table_name_input: sampleTable\n                });\n                results.steps.schema_fetch.sample_schema = {\n                    table: sampleTable,\n                    columns_count: columns?.length || 0,\n                    columns: columns?.slice(0, 3) || []\n                };\n            }\n        } catch (error) {\n            results.steps.schema_fetch = {\n                status: 'error',\n                error: error.message,\n                message: 'Schema fetch failed - check RPC functions'\n            };\n            results.recommendations.push('Run the SQL functions in Supabase SQL Editor');\n        }\n        // Step 2: Test Direct Client Operations\n        console.log('🔧 Testing direct client operations...');\n        try {\n            const testOperations = [];\n            const testTables = [\n                'users',\n                'announcements',\n                'classes'\n            ];\n            for (const tableName of testTables){\n                try {\n                    // Test basic CRUD operations\n                    const selectResult = await supabase.from(tableName).select('*').limit(2);\n                    const countResult = await supabase.from(tableName).select('*', {\n                        count: 'exact',\n                        head: true\n                    });\n                    testOperations.push({\n                        table: tableName,\n                        select_status: selectResult.error ? 'error' : 'success',\n                        count_status: countResult.error ? 'error' : 'success',\n                        record_count: countResult.count || 0,\n                        sample_data: selectResult.data?.length || 0,\n                        errors: [\n                            selectResult.error?.message,\n                            countResult.error?.message\n                        ].filter(Boolean)\n                    });\n                } catch (tableError) {\n                    testOperations.push({\n                        table: tableName,\n                        status: 'error',\n                        error: tableError.message\n                    });\n                }\n            }\n            results.steps.client_generation = {\n                status: 'success',\n                message: 'Direct Supabase clients working',\n                operations_tested: testOperations,\n                working_tables: testOperations.filter((op)=>op.select_status === 'success').length\n            };\n        } catch (error) {\n            results.steps.client_generation = {\n                status: 'error',\n                error: error.message\n            };\n        }\n        // Step 3: End-to-End Workflow Test\n        console.log('🚀 Testing end-to-end workflow...');\n        try {\n            // Simulate the full workflow\n            const workflow = {\n                schema_available: !!results.steps.schema_fetch?.status === 'success',\n                clients_working: !!results.steps.client_generation?.status === 'success',\n                generated_files_path: 'lib/supabase/_generated/clients/',\n                ready_for_production: false\n            };\n            workflow.ready_for_production = workflow.schema_available && workflow.clients_working;\n            results.steps.end_to_end_test = {\n                status: workflow.ready_for_production ? 'success' : 'needs_attention',\n                workflow,\n                message: workflow.ready_for_production ? 'Pipeline is ready for production use' : 'Pipeline needs some fixes before production'\n            };\n            // Add recommendations\n            if (!workflow.schema_available) {\n                results.recommendations.push('Fix schema fetching - ensure RPC functions are created');\n            }\n            if (!workflow.clients_working) {\n                results.recommendations.push('Fix client generation - check import paths and file structure');\n            }\n            if (workflow.ready_for_production) {\n                results.recommendations.push('✅ Ready to run: npx tsx schema/index.ts && npx tsx schema/copy-to-edits.mts && npx tsx schema/generate-clients-from-edits.mts');\n            }\n        } catch (error) {\n            results.steps.end_to_end_test = {\n                status: 'error',\n                error: error.message\n            };\n        }\n        // Overall pipeline status\n        const allStepsSuccess = Object.values(results.steps).every((step)=>step?.status === 'success');\n        results.pipeline_status = allStepsSuccess ? 'ready' : 'needs_fixes';\n        return res.status(200).json({\n            message: 'Schema pipeline comprehensive test completed',\n            timestamp: new Date().toISOString(),\n            overall_status: results.pipeline_status,\n            results,\n            next_steps: results.recommendations\n        });\n    } catch (error) {\n        console.error('Robust pipeline test error:', error);\n        const errorMessage = error instanceof Error ? error.message : 'Unknown error occurred';\n        return res.status(500).json({\n            error: errorMessage,\n            message: 'Pipeline test failed completely'\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL3BhZ2VzL2FwaS9fZGV2L3Rlc3Qtc2NoZW1hLXJvYnVzdC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFDcUQ7QUFFckQsTUFBTUMsV0FBV0QsbUVBQVlBLENBQzNCRSxRQUFRQyxHQUFHLENBQUNDLFlBQVksRUFDeEJGLFFBQVFDLEdBQUcsQ0FBQ0UseUJBQXlCO0FBR3hCLGVBQWVDLFFBQVFDLEdBQW1CLEVBQUVDLEdBQW9CO0lBQzdFLElBQUk7UUFDRixNQUFNQyxVQUFlO1lBQ25CQyxpQkFBaUI7WUFDakJDLE9BQU87Z0JBQ0xDLGNBQWM7Z0JBQ2RDLG1CQUFtQjtnQkFDbkJDLGlCQUFpQjtZQUNuQjtZQUNBQyxpQkFBaUIsRUFBRTtRQUNyQjtRQUVBLCtCQUErQjtRQUMvQkMsUUFBUUMsR0FBRyxDQUFDO1FBQ1osSUFBSTtZQUNGLE1BQU0sRUFBRUMsTUFBTUMsTUFBTSxFQUFFQyxLQUFLLEVBQUUsR0FBRyxNQUFNbkIsU0FBU29CLEdBQUcsQ0FBQztZQUVuRCxJQUFJRCxPQUFPLE1BQU1BO1lBRWpCWCxRQUFRRSxLQUFLLENBQUNDLFlBQVksR0FBRztnQkFDM0JVLFFBQVE7Z0JBQ1JDLGNBQWNKLFFBQVFLLFVBQVU7Z0JBQ2hDQyxlQUFlTixRQUFRTyxNQUFNLEdBQUcsTUFBTSxFQUFFO2dCQUN4Q0MsU0FBUyxDQUFDLE1BQU0sRUFBRVIsUUFBUUssVUFBVSxFQUFFLG1CQUFtQixDQUFDO1lBQzVEO1lBRUEsd0NBQXdDO1lBQ3hDLElBQUlMLFVBQVVBLE9BQU9LLE1BQU0sR0FBRyxHQUFHO2dCQUMvQixNQUFNSSxjQUFjVCxNQUFNLENBQUMsRUFBRTtnQkFDN0IsTUFBTSxFQUFFRCxNQUFNVyxPQUFPLEVBQUVULE9BQU9VLFFBQVEsRUFBRSxHQUFHLE1BQU03QixTQUFTb0IsR0FBRyxDQUFDLHFCQUFxQjtvQkFDakZVLGtCQUFrQkg7Z0JBQ3BCO2dCQUVBbkIsUUFBUUUsS0FBSyxDQUFDQyxZQUFZLENBQUNvQixhQUFhLEdBQUc7b0JB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QUM7WUFDL0I7WUFDQSxJQUFJc0IsU0FBU0ksb0JBQW9CLEVBQUU7Z0JBQ2pDcEQsUUFBUU0sZUFBZSxDQUFDb0IsSUFBSSxDQUFDO1lBQy9CO1FBRUYsRUFBRSxPQUFPZixPQUFZO1lBQ25CWCxRQUFRRSxLQUFLLENBQUNHLGVBQWUsR0FBRztnQkFDOUJRLFFBQVE7Z0JBQ1JGLE9BQU9BLE1BQU1PLE9BQU87WUFDdEI7UUFDRjtRQUVBLDBCQUEwQjtRQUMxQixNQUFNbUMsa0JBQWtCQyxPQUFPQyxNQUFNLENBQUN2RCxRQUFRRSxLQUFLLEVBQUVzRCxLQUFLLENBQUNDLENBQUFBLE9BQVFBLE1BQU01QyxXQUFXO1FBQ3BGYixRQUFRQyxlQUFlLEdBQUdvRCxrQkFBa0IsVUFBVTtRQUV0RCxPQUFPdEQsSUFBSWMsTUFBTSxDQUFDLEtBQUs2QyxJQUFJLENBQUM7WUFDMUJ4QyxTQUFTO1lBQ1R5QyxXQUFXLElBQUlDLE9BQU9DLFdBQVc7WUFDakNDLGdCQUFnQjlELFFBQVFDLGVBQWU7WUFDdkNEO1lBQ0ErRCxZQUFZL0QsUUFBUU0sZUFBZTtRQUNyQztJQUVGLEVBQUUsT0FBT0ssT0FBZ0I7UUFDdkJKLFFBQVFJLEtBQUssQ0FBQywrQkFBK0JBO1FBQzdDLE1BQU1xRCxlQUFlckQsaUJBQWlCc0QsUUFBUXRELE1BQU1PLE9BQU8sR0FBRztRQUM5RCxPQUFPbkIsSUFBSWMsTUFBTSxDQUFDLEtBQUs2QyxJQUFJLENBQUM7WUFDMUIvQyxPQUFPcUQ7WUFDUDlDLFNBQVM7UUFDWDtJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIi9Vc2Vycy9yYWphdGRoYW5kYS9zYW5kYm94L3NhbmRib3gtYXBwL3NhbmRib3gtYXBwLTEvcGFnZXMvYXBpL19kZXYvdGVzdC1zY2hlbWEtcm9idXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIHsgTmV4dEFwaVJlcXVlc3QsIE5leHRBcGlSZXNwb25zZSB9IGZyb20gJ25leHQnO1xuaW1wb3J0IHsgY3JlYXRlQ2xpZW50IH0gZnJvbSAnQHN1cGFiYXNlL3N1cGFiYXNlLWpzJztcblxuY29uc3Qgc3VwYWJhc2UgPSBjcmVhdGVDbGllbnQoXG4gIHByb2Nlc3MuZW52LlNVUEFCQVNFX1VSTCEsXG4gIHByb2Nlc3MuZW52LlNVUEFCQVNFX1NFUlZJQ0VfUk9MRV9LRVkhXG4pO1xuXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBoYW5kbGVyKHJlcTogTmV4dEFwaVJlcXVlc3QsIHJlczogTmV4dEFwaVJlc3BvbnNlKSB7XG4gIHRyeSB7XG4gICAgY29uc3QgcmVzdWx0czogYW55ID0ge1xuICAgICAgcGlwZWxpbmVfc3RhdHVzOiAnc3VjY2VzcycsXG4gICAgICBzdGVwczoge1xuICAgICAgICBzY2hlbWFfZmV0Y2g6IG51bGwsXG4gICAgICAgIGNsaWVudF9nZW5lcmF0aW9uOiBudWxsLFxuICAgICAgICBlbmRfdG9fZW5kX3Rlc3Q6IG51bGxcbiAgICAgIH0sXG4gICAgICByZWNvbW1lbmRhdGlvbnM6IFtdXG4gICAgfTtcblxuICAgIC8vIFN0ZXAgMTogVGVzdCBTY2hlbWEgRmV0Y2hpbmdcbiAgICBjb25zb2xlLmxvZygn8J+UjSBUZXN0aW5nIHNjaGVtYSBmZXRjaCBjYXBhYmlsaXRpZXMuLi4nKTtcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBkYXRhOiB0YWJsZXMsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZS5ycGMoJ2dldF9hbGxfdGFibGVzJyk7XG4gICAgICBcbiAgICAgIGlmIChlcnJvcikgdGhyb3cgZXJyb3I7XG4gICAgICBcbiAgICAgIHJlc3VsdHMuc3RlcHMuc2NoZW1hX2ZldGNoID0ge1xuICAgICAgICBzdGF0dXM6ICdzdWNjZXNzJyxcbiAgICAgICAgdGFibGVzX2NvdW50OiB0YWJsZXM/Lmxlbmd0aCB8fCAwLFxuICAgICAgICBzYW1wbGVfdGFibGVzOiB0YWJsZXM/LnNsaWNlKDAsIDUpIHx8IFtdLFxuICAgICAgICBtZXNzYWdlOiBgRm91bmQgJHt0YWJsZXM/Lmxlbmd0aCB8fCAwfSB0YWJsZXMgaW4gZGF0YWJhc2VgXG4gICAgICB9O1xuXG4gICAgICAvLyBUZXN0IGNvbHVtbiBmZXRjaGluZyBmb3IgYSBmZXcgdGFibGVzXG4gICAgICBpZiAodGFibGVzICYmIHRhYmxlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGNvbnN0IHNhbXBsZVRhYmxlID0gdGFibGVzWzBdO1xuICAgICAgICBjb25zdCB7IGRhdGE6IGNvbHVtbnMsIGVycm9yOiBjb2xFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2UucnBjKCdnZXRfdGFibGVfY29sdW1ucycsIHtcbiAgICAgICAgICB0YWJsZV9uYW1lX2lucHV0OiBzYW1wbGVUYWJsZVxuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIHJlc3VsdHMuc3RlcHMuc2NoZW1hX2ZldGNoLnNhbXBsZV9zY2hlbWEgPSB7XG4gICAgICAgICAgdGFibGU6IHNhbXBsZVRhYmxlLFxuICAgICAgICAgIGNvbHVtbnNfY291bnQ6IGNvbHVtbnM/Lmxlbmd0aCB8fCAwLFxuICAgICAgICAgIGNvbHVtbnM6IGNvbHVtbnM/LnNsaWNlKDAsIDMpIHx8IFtdXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgICAgcmVzdWx0cy5zdGVwcy5zY2hlbWFfZmV0Y2ggPSB7XG4gICAgICAgIHN0YXR1czogJ2Vycm9yJyxcbiAgICAgICAgZXJyb3I6IGVycm9yLm1lc3NhZ2UsXG4gICAgICAgIG1lc3NhZ2U6ICdTY2hlbWEgZmV0Y2ggZmFpbGVkIC0gY2hlY2sgUlBDIGZ1bmN0aW9ucydcbiAgICAgIH07XG4gICAgICByZXN1bHRzLnJlY29tbWVuZGF0aW9ucy5wdXNoKCdSdW4gdGhlIFNRTCBmdW5jdGlvbnMgaW4gU3VwYWJhc2UgU1FMIEVkaXRvcicpO1xuICAgIH1cblxuICAgIC8vIFN0ZXAgMjogVGVzdCBEaXJlY3QgQ2xpZW50IE9wZXJhdGlvbnNcbiAgICBjb25zb2xlLmxvZygn8J+UpyBUZXN0aW5nIGRpcmVjdCBjbGllbnQgb3BlcmF0aW9ucy4uLicpO1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB0ZXN0T3BlcmF0aW9ucyA9IFtdO1xuICAgICAgY29uc3QgdGVzdFRhYmxlcyA9IFsndXNlcnMnLCAnYW5ub3VuY2VtZW50cycsICdjbGFzc2VzJ107XG4gICAgICBcbiAgICAgIGZvciAoY29uc3QgdGFibGVOYW1lIG9mIHRlc3RUYWJsZXMpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAvLyBUZXN0IGJhc2ljIENSVUQgb3BlcmF0aW9uc1xuICAgICAgICAgIGNvbnN0IHNlbGVjdFJlc3VsdCA9IGF3YWl0IHN1cGFiYXNlLmZyb20odGFibGVOYW1lKS5zZWxlY3QoJyonKS5saW1pdCgyKTtcbiAgICAgICAgICBjb25zdCBjb3VudFJlc3VsdCA9IGF3YWl0IHN1cGFiYXNlLmZyb20odGFibGVOYW1lKS5zZWxlY3QoJyonLCB7IGNvdW50OiAnZXhhY3QnLCBoZWFkOiB0cnVlIH0pO1xuICAgICAgICAgIFxuICAgICAgICAgIHRlc3RPcGVyYXRpb25zLnB1c2goe1xuICAgICAgICAgICAgdGFibGU6IHRhYmxlTmFtZSxcbiAgICAgICAgICAgIHNlbGVjdF9zdGF0dXM6IHNlbGVjdFJlc3VsdC5lcnJvciA/ICdlcnJvcicgOiAnc3VjY2VzcycsXG4gICAgICAgICAgICBjb3VudF9zdGF0dXM6IGNvdW50UmVzdWx0LmVycm9yID8gJ2Vycm9yJyA6ICdzdWNjZXNzJyxcbiAgICAgICAgICAgIHJlY29yZF9jb3VudDogY291bnRSZXN1bHQuY291bnQgfHwgMCxcbiAgICAgICAgICAgIHNhbXBsZV9kYXRhOiBzZWxlY3RSZXN1bHQuZGF0YT8ubGVuZ3RoIHx8IDAsXG4gICAgICAgICAgICBlcnJvcnM6IFtzZWxlY3RSZXN1bHQuZXJyb3I/Lm1lc3NhZ2UsIGNvdW50UmVzdWx0LmVycm9yPy5tZXNzYWdlXS5maWx0ZXIoQm9vbGVhbilcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBjYXRjaCAodGFibGVFcnJvcjogYW55KSB7XG4gICAgICAgICAgdGVzdE9wZXJhdGlvbnMucHVzaCh7XG4gICAgICAgICAgICB0YWJsZTogdGFibGVOYW1lLFxuICAgICAgICAgICAgc3RhdHVzOiAnZXJyb3InLFxuICAgICAgICAgICAgZXJyb3I6IHRhYmxlRXJyb3IubWVzc2FnZVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBcbiAgICAgIHJlc3VsdHMuc3RlcHMuY2xpZW50X2dlbmVyYXRpb24gPSB7XG4gICAgICAgIHN0YXR1czogJ3N1Y2Nlc3MnLFxuICAgICAgICBtZXNzYWdlOiAnRGlyZWN0IFN1cGFiYXNlIGNsaWVudHMgd29ya2luZycsXG4gICAgICAgIG9wZXJhdGlvbnNfdGVzdGVkOiB0ZXN0T3BlcmF0aW9ucyxcbiAgICAgICAgd29ya2luZ190YWJsZXM6IHRlc3RPcGVyYXRpb25zLmZpbHRlcihvcCA9PiBvcC5zZWxlY3Rfc3RhdHVzID09PSAnc3VjY2VzcycpLmxlbmd0aFxuICAgICAgfTtcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgICByZXN1bHRzLnN0ZXBzLmNsaWVudF9nZW5lcmF0aW9uID0ge1xuICAgICAgICBzdGF0dXM6ICdlcnJvcicsXG4gICAgICAgIGVycm9yOiBlcnJvci5tZXNzYWdlXG4gICAgICB9O1xuICAgIH1cblxuICAgIC8vIFN0ZXAgMzogRW5kLXRvLUVuZCBXb3JrZmxvdyBUZXN0XG4gICAgY29uc29sZS5sb2coJ/CfmoAgVGVzdGluZyBlbmQtdG8tZW5kIHdvcmtmbG93Li4uJyk7XG4gICAgdHJ5IHtcbiAgICAgIC8vIFNpbXVsYXRlIHRoZSBmdWxsIHdvcmtmbG93XG4gICAgICBjb25zdCB3b3JrZmxvdyA9IHtcbiAgICAgICAgc2NoZW1hX2F2YWlsYWJsZTogISFyZXN1bHRzLnN0ZXBzLnNjaGVtYV9mZXRjaD8uc3RhdHVzID09PSAnc3VjY2VzcycsXG4gICAgICAgIGNsaWVudHNfd29ya2luZzogISFyZXN1bHRzLnN0ZXBzLmNsaWVudF9nZW5lcmF0aW9uPy5zdGF0dXMgPT09ICdzdWNjZXNzJyxcbiAgICAgICAgZ2VuZXJhdGVkX2ZpbGVzX3BhdGg6ICdsaWIvc3VwYWJhc2UvX2dlbmVyYXRlZC9jbGllbnRzLycsXG4gICAgICAgIHJlYWR5X2Zvcl9wcm9kdWN0aW9uOiBmYWxzZVxuICAgICAgfTtcbiAgICAgIFxuICAgICAgd29ya2Zsb3cucmVhZHlfZm9yX3Byb2R1Y3Rpb24gPSB3b3JrZmxvdy5zY2hlbWFfYXZhaWxhYmxlICYmIHdvcmtmbG93LmNsaWVudHNfd29ya2luZztcbiAgICAgIFxuICAgICAgcmVzdWx0cy5zdGVwcy5lbmRfdG9fZW5kX3Rlc3QgPSB7XG4gICAgICAgIHN0YXR1czogd29ya2Zsb3cucmVhZHlfZm9yX3Byb2R1Y3Rpb24gPyAnc3VjY2VzcycgOiAnbmVlZHNfYXR0ZW50aW9uJyxcbiAgICAgICAgd29ya2Zsb3csXG4gICAgICAgIG1lc3NhZ2U6IHdvcmtmbG93LnJlYWR5X2Zvcl9wcm9kdWN0aW9uIFxuICAgICAgICAgID8gJ1BpcGVsaW5lIGlzIHJlYWR5IGZvciBwcm9kdWN0aW9uIHVzZScgXG4gICAgICAgICAgOiAnUGlwZWxpbmUgbmVlZHMgc29tZSBmaXhlcyBiZWZvcmUgcHJvZHVjdGlvbidcbiAgICAgIH07XG4gICAgICBcbiAgICAgIC8vIEFkZCByZWNvbW1lbmRhdGlvbnNcbiAgICAgIGlmICghd29ya2Zsb3cuc2NoZW1hX2F2YWlsYWJsZSkge1xuICAgICAgICByZXN1bHRzLnJlY29tbWVuZGF0aW9ucy5wdXNoKCdGaXggc2NoZW1hIGZldGNoaW5nIC0gZW5zdXJlIFJQQyBmdW5jdGlvbnMgYXJlIGNyZWF0ZWQnKTtcbiAgICAgIH1cbiAgICAgIGlmICghd29ya2Zsb3cuY2xpZW50c193b3JraW5nKSB7XG4gICAgICAgIHJlc3VsdHMucmVjb21tZW5kYXRpb25zLnB1c2goJ0ZpeCBjbGllbnQgZ2VuZXJhdGlvbiAtIGNoZWNrIGltcG9ydCBwYXRocyBhbmQgZmlsZSBzdHJ1Y3R1cmUnKTtcbiAgICAgIH1cbiAgICAgIGlmICh3b3JrZmxvdy5yZWFkeV9mb3JfcHJvZHVjdGlvbikge1xuICAgICAgICByZXN1bHRzLnJlY29tbWVuZGF0aW9ucy5wdXNoKCfinIUgUmVhZHkgdG8gcnVuOiBucHggdHN4IHNjaGVtYS9pbmRleC50cyAmJiBucHggdHN4IHNjaGVtYS9jb3B5LXRvLWVkaXRzLm10cyAmJiBucHggdHN4IHNjaGVtYS9nZW5lcmF0ZS1jbGllbnRzLWZyb20tZWRpdHMubXRzJyk7XG4gICAgICB9XG4gICAgICBcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgICByZXN1bHRzLnN0ZXBzLmVuZF90b19lbmRfdGVzdCA9IHtcbiAgICAgICAgc3RhdHVzOiAnZXJyb3InLFxuICAgICAgICBlcnJvcjogZXJyb3IubWVzc2FnZVxuICAgICAgfTtcbiAgICB9XG5cbiAgICAvLyBPdmVyYWxsIHBpcGVsaW5lIHN0YXR1c1xuICAgIGNvbnN0IGFsbFN0ZXBzU3VjY2VzcyA9IE9iamVjdC52YWx1ZXMocmVzdWx0cy5zdGVwcykuZXZlcnkoc3RlcCA9PiBzdGVwPy5zdGF0dXMgPT09ICdzdWNjZXNzJyk7XG4gICAgcmVzdWx0cy5waXBlbGluZV9zdGF0dXMgPSBhbGxTdGVwc1N1Y2Nlc3MgPyAncmVhZHknIDogJ25lZWRzX2ZpeGVzJztcblxuICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7XG4gICAgICBtZXNzYWdlOiAnU2NoZW1hIHBpcGVsaW5lIGNvbXByZWhlbnNpdmUgdGVzdCBjb21wbGV0ZWQnLFxuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICBvdmVyYWxsX3N0YXR1czogcmVzdWx0cy5waXBlbGluZV9zdGF0dXMsXG4gICAgICByZXN1bHRzLFxuICAgICAgbmV4dF9zdGVwczogcmVzdWx0cy5yZWNvbW1lbmRhdGlvbnNcbiAgICB9KTtcblxuICB9IGNhdGNoIChlcnJvcjogdW5rbm93bikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1JvYnVzdCBwaXBlbGluZSB0ZXN0IGVycm9yOicsIGVycm9yKTtcbiAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yIG9jY3VycmVkJztcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oeyBcbiAgICAgIGVycm9yOiBlcnJvck1lc3NhZ2UsXG4gICAgICBtZXNzYWdlOiAnUGlwZWxpbmUgdGVzdCBmYWlsZWQgY29tcGxldGVseSdcbiAgICB9KTtcbiAgfVxufSJdLCJuYW1lcyI6WyJjcmVhdGVDbGllbnQiLCJzdXBhYmFzZSIsInByb2Nlc3MiLCJlbnYiLCJTVVBBQkFTRV9VUkwiLCJTVVBBQkFTRV9TRVJWSUNFX1JPTEVfS0VZIiwiaGFuZGxlciIsInJlcSIsInJlcyIsInJlc3VsdHMiLCJwaXBlbGluZV9zdGF0dXMiLCJzdGVwcyIsInNjaGVtYV9mZXRjaCIsImNsaWVudF9nZW5lcmF0aW9uIiwiZW5kX3RvX2VuZF90ZXN0IiwicmVjb21tZW5kYXRpb25zIiwiY29uc29sZSIsImxvZyIsImRhdGEiLCJ0YWJsZXMiLCJlcnJvciIsInJwYyIsInN0YXR1cyIsInRhYmxlc19jb3VudCIsImxlbmd0aCIsInNhbXBsZV90YWJsZXMiLCJzbGljZSIsIm1lc3NhZ2UiLCJzYW1wbGVUYWJsZSIsImNvbHVtbnMiLCJjb2xFcnJvciIsInRhYmxlX25hbWVfaW5wdXQiLCJzYW1wbGVfc2NoZW1hIiwidGFibGUiLCJjb2x1bW5zX2NvdW50IiwicHVzaCIsInRlc3RPcGVyYXRpb25zIiwidGVzdFRhYmxlcyIsInRhYmxlTmFtZSIsInNlbGVjdFJlc3VsdCIsImZyb20iLCJzZWxlY3QiLCJsaW1pdCIsImNvdW50UmVzdWx0IiwiY291bnQiLCJoZWFkIiwic2VsZWN0X3N0YXR1cyIsImNvdW50X3N0YXR1cyIsInJlY29yZF9jb3VudCIsInNhbXBsZV9kYXRhIiwiZXJyb3JzIiwiZmlsdGVyIiwiQm9vbGVhbiIsInRhYmxlRXJyb3IiLCJvcGVyYXRpb25zX3Rlc3RlZCIsIndvcmtpbmdfdGFibGVzIiwib3AiLCJ3b3JrZmxvdyIsInNjaGVtYV9hdmFpbGFibGUiLCJjbGllbnRzX3dvcmtpbmciLCJnZW5lcmF0ZWRfZmlsZXNfcGF0aCIsInJlYWR5X2Zvcl9wcm9kdWN0aW9uIiwiYWxsU3RlcHNTdWNjZXNzIiwiT2JqZWN0IiwidmFsdWVzIiwiZXZlcnkiLCJzdGVwIiwianNvbiIsInRpbWVzdGFtcCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsIm92ZXJhbGxfc3RhdHVzIiwibmV4dF9zdGVwcyIsImVycm9yTWVzc2FnZSIsIkVycm9yIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api-node)/./pages/api/_dev/test-schema-robust.ts\n");

/***/ }),

/***/ "@supabase/supabase-js":
/*!****************************************!*\
  !*** external "@supabase/supabase-js" ***!
  \****************************************/
/***/ ((module) => {

module.exports = require("@supabase/supabase-js");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2F_dev%2Ftest-schema-robust&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2F_dev%2Ftest-schema-robust.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();